.page-header
  %h2= t '.headings.overview'

%p= t '.total_events', :count => @events[:total_number_of_events_in_database]

%h2= t '.headings.organized'

%table.table
  %tr
    %th= Event.human_attribute_name :name
    %th= Event.human_attribute_name :description
    %th= Event.human_attribute_name :total_costs
    %th
    %th
    %th

  -# = render @events[:own_events] # TODO undry, use partials
  - @events[:own_events].each do |event|
    %tr{id: "row_event_#{event.id}"}
      %td= event.name
      %td= event.description
      %td= event.total_costs
      %td= link_to t(:show), event, class: 'btn' if can? :read, event
      %td= link_to t(:edit), edit_event_url(event), class: 'btn' if can? :update, event
      %td= link_to t('events.index.trash'), trash_event_url(event),
        class: 'btn btn-warning', confirm: t('events.index.trash_confirm') if can? :destroy, event


- if can? :create, Event
  = link_to t('.new_event'), new_event_path, :class => 'btn btn-primary'

%h2= t '.headings.contributed'

%table.table
  %tr
    %th= Event.human_attribute_name :name
    %th= Event.human_attribute_name :description
    %th= Event.human_attribute_name :total_costs
    %th
    %th
    %th

  = render @events[:joined_events]

%h2= t '.headings.trashed'
= t '.infos.trashed'

- if @events[:trashed_events].count > 0
  %table.table
    %tr
      %th= Event.human_attribute_name :name
      %th= Event.human_attribute_name :trashed_at
      %th

    - @events[:trashed_events].each do |trashed_event|
      %tr
        %td=trashed_event.name
        %td=trashed_event.trashed_at
        %td= link_to t('events.index.recover'), recover_event_url(trashed_event), class: 'btn btn-success'

- else
  %strong.lead= t 'none'
